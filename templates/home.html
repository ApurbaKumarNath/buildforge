{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section" style="--hero-bg: url('{% static 'images/hero_bg.png' %}');">
    <div class="hero-content">
        <h1>Build Your Dream Machine</h1>
        <p>The ultimate workbench for PC enthusiasts. Plan, share, and trade components with a community of builders.
        </p>
        {% if not user.is_authenticated %}
        <div class="hero-actions">
            <a href="{% url 'users:register' %}" class="btn btn-primary btn-lg">Start Building</a>
            <a href="{% url 'users:login' %}" class="btn btn-outline-light btn-lg">Login</a>
        </div>
        {% else %}
        <div class="hero-actions">
            <a href="{% url 'builds:create' %}" class="btn btn-primary btn-lg">New Build</a>
            <a href="{% url 'marketplace:list' %}" class="btn btn-outline-light btn-lg">Browse Market</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="main-content">
    {% if user.is_authenticated %}
    <div class="dashboard-header-modern">
        <h2>Welcome back, {{ user.username }}!</h2>
    </div>

    <!-- Feature Grid -->
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ”</div>
            <h3>Component Catalog</h3>
            <p>Browse thousands of parts with detailed specs to find exactly what you need.</p>
            <a href="{% url 'catalog:chooser' %}" class="feature-link">Open Catalog &rarr;</a>
        </div>

        <div class="feature-card">
            <div class="feature-icon">ğŸ“š</div>
            <h3>Build Guides</h3>
            <p>Follow expert-curated guides or create your own to share with the world.</p>
            <a href="{% url 'builds:guides' %}" class="feature-link">View Guides &rarr;</a>
        </div>

        <div class="feature-card">
            <div class="feature-icon">ğŸ›’</div>
            <h3>Marketplace</h3>
            <p>Buy and sell pre-loved components safely within the community.</p>
            <a href="{% url 'marketplace:list' %}" class="feature-link">Visit Market &rarr;</a>
        </div>

        <div class="feature-card">
            <div class="feature-icon">â­</div>
            <h3>Wishlist</h3>
            <p>Track price drops and save components for your future dream build.</p>
            <a href="{% url 'builds:wishlist' %}" class="feature-link">My Wishlist &rarr;</a>
        </div>
    </div>

    <!-- User's Builds Section -->
    <div class="section-container">
        <div class="section-header">
            <h2>Your Current Builds</h2>
            <input type="search" name="q" placeholder="Search your builds..." class="search-input"
                hx-get="{% url 'home' %}" hx-trigger="keyup changed delay:300ms, search"
                hx-target="#build-list-container" hx-select="#build-list-container" hx-swap="outerHTML">

        </div>

        <div id="build-list-container" class="builds-list-wrapper">
            {% include 'builds/partials/build_list.html' %}
        </div>
    </div>

    {% else %}
    <!-- Features for Guest -->
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸš€</div>
            <h3>Performance First</h3>
            <p>Optimize your build with compatibility checks and performance estimates.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ¤</div>
            <h3>Community Driven</h3>
            <p>Join thousands of builders sharing knowledge and components.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ›¡ï¸</div>
            <h3>Safe Trading</h3>
            <p>Our marketplace is built for enthusiasts, by enthusiasts.</p>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}