<!-- templates/marketplace/listing_detail.html -->
{% extends "base.html" %}

{% block content %}
<style>
    .detail-container { display: flex; gap: 2em; }
    .detail-image { flex: 1; }
    .detail-image img { max-width: 100%; border-radius: 8px; }
    .detail-info { flex: 1; }
    .price { font-size: 2em; font-weight: bold; color: #28a745; margin-bottom: 0.5em; }
    .seller-info { background-color: #f8f9fa; padding: 1em; border-radius: 8px; margin-top: 1em; }
    .comments-section { margin-top: 3em; }
    .comment { border-bottom: 1px solid #eee; padding: 1em 0; }
    .comment-author { font-weight: bold; }
    .comment-date { color: #6c757d; font-size: 0.9em; }
</style>

<div class="detail-container">
    <div class="detail-image">
        {% if listing.image %}
            <img src="{{ listing.image.url }}" alt="{{ listing.title }}">
        {% else %}
            <img src="https://via.placeholder.com/600x400.png?text=No+Image" alt="No image available">
        {% endif %}
    </div>
    <div class="detail-info">
        <h1>{{ listing.title }}</h1>
        <p class="price">à§³{{ listing.price|floatformat:2 }}</p>
        <p>{{ listing.description|linebreaks }}</p>
        <div class="seller-info">
            <strong>Seller:</strong> {{ listing.seller.username }}<br>
            <strong>Listed on:</strong> {{ listing.date_listed|date:"F j, Y" }}
        </div>
    </div>
</div>

<div class="comments-section">
    <h2>Comments</h2>
    <hr>
    {% for comment in comments %}
        <div class="comment">
            <p class="comment-author">{{ comment.author.username }}</p>
            <p>{{ comment.body }}</p>
            <p class="comment-date">{{ comment.created_at|date:"F j, Y, P" }}</p>
        </div>
    {% empty %}
        <p>No comments yet. Be the first to ask a question!</p>
    {% endfor %}
</div>
{% endblock %}